From 6d75be2d038aa97a1ce52088c6f09d9829e5a39a Mon Sep 17 00:00:00 2001
From: Kevin O'Connor <kevin@koconnor.net>
Date: Thu, 28 Jan 2010 20:33:20 -0500
Subject: [PATCH] Go back to using 0xf0000000 for PCI memory start.

Qemu/Kvm still has some dependencies on 0xe0000000, so go back until
they are ready.
---
 src/config.h  |    1 +
 src/pciinit.c |    2 +-
 2 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/src/config.h b/src/config.h
index 58c0ffc..6297a48 100644
--- a/src/config.h
+++ b/src/config.h
@@ -143,6 +143,7 @@
 // 32KB for shadow ram copying (works around emulator deficiencies)
 #define BUILD_BIOS_TMP_ADDR       0x30000
 #define BUILD_MAX_HIGHMEM         0xe0000000
+#define BUILD_PCIMEM_START        0xf0000000

 #define BUILD_APIC_ADDR           0xfee00000
 #define BUILD_IOAPIC_ADDR         0xfec00000
diff --git a/src/pciinit.c b/src/pciinit.c
index a6070e7..0556ee2 100644
--- a/src/pciinit.c
+++ b/src/pciinit.c
@@ -194,7 +194,7 @@ pci_setup(void)
     dprintf(3, "pci setup\n");

     pci_bios_io_addr = 0xc000;
-    pci_bios_mem_addr = BUILD_MAX_HIGHMEM;
+    pci_bios_mem_addr = BUILD_PCIMEM_START;

     int bdf, max;
     foreachpci(bdf, max) {
-- 
1.6.6.1

